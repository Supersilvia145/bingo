const http = require('http'); const WebSocket = require('ws'); const server = http.createServer(); const wss = new WebSocket.Server({ server }); let players = []; let currentNumber = null; wss.on('connection', (ws) => { players.push({ ws, card: generateBingoCard(), isBingo: false }); ws.send(JSON.stringify({ type: 'init', card: players[players.length - 1].card })); if (currentNumber) { ws.send(JSON.stringify({ type: 'number', number: currentNumber })); } ws.on('message', (message) => { const data = JSON.parse(message); if (data.type === 'draw') { currentNumber = drawNumber(); broadcast({ type: 'number', number: currentNumber }); checkBingo(); } }); }); function drawNumber() { return Math.floor(Math.random() * 75) + 1; } function generateBingoCard() { let card = []; for (let i = 0; i < 5; i++) { card.push(Array.from({ length: 5 }, () => Math.floor(Math.random() * 75) + 1)); } return card; } function broadcast(data) { players.forEach((player) => player.ws.send(JSON.stringify(data))); } function checkBingo() { players.forEach((player) => { player.isBingo = true; }); } server.listen(8080, () => { console.log('Server started on http://localhost:8080'); });